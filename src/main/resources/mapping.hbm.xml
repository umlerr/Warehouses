<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping>

    <class name="com.umler.warehouses.Model.Warehouse" table="Warehouse">
        <id name="id_warehouse" type="java.lang.Integer" column="id_warehouse" >
            <generator class="increment" />
        </id>

        <property name="address" >
            <column name="address" />
        </property>

        <set name="managerList" inverse="true" cascade="all-delete-orphan">
            <key column="warehouse_id" />
            <one-to-many class="com.umler.warehouses.Model.Manager" />
        </set>

        <set name="roomList" inverse="true" cascade="all-delete-orphan">
            <key column="warehouse_id" />
            <one-to-many class="com.umler.warehouses.Model.Room" />
        </set>

        <set name="contractList" inverse="true" cascade="all-delete-orphan">
            <key column="warehouse_id" />
            <one-to-many class="com.umler.warehouses.Model.Contract" />
        </set>
    </class>

    <class name="com.umler.warehouses.Model.Manager" table="Manager">
        <id name="id_manager" type="java.lang.Integer" column="id_manager" >
            <generator class="increment" />
        </id>
        <property name="name">
            <column name="name" />
        </property>
        <property name="surname">
            <column name="surname"/>
        </property>
        <many-to-one name="warehouse" class="com.umler.warehouses.Model.Warehouse" column="warehouse_id" />
    </class>

    <class name="com.umler.warehouses.Model.Room" table="Room">
        <id name="id_room" type="java.lang.Integer" column="id_room" >
            <generator class="identity" />
        </id>
        <property name="Number">
            <column name="number" />
        </property>

        <set name="shelfList" inverse="true" cascade="all-delete-orphan">
            <key column="room_id" />
            <one-to-many class="com.umler.warehouses.Model.Shelf" />
        </set>

        <many-to-one name="warehouse" class="com.umler.warehouses.Model.Warehouse" column="warehouse_id" />
    </class>

    <class name="com.umler.warehouses.Model.Shelf" table="Shelf">
        <id name="id_shelf" type="java.lang.Integer" column="id_shelf" >
            <generator class="identity" />
        </id>
        <property name="Number">
            <column name="number" />
        </property>
        <property name="Capacity">
            <column name="capacity" />
        </property>

        <set name="productList" inverse="true" cascade="all-delete-orphan">
            <key column="shelf_id" />
            <one-to-many class="com.umler.warehouses.Model.Product" />
        </set>

        <many-to-one name="room" class="com.umler.warehouses.Model.Room" column="room_id" />
    </class>

    <class name="com.umler.warehouses.Model.Product" table="Product">
        <id name="id_product" type="java.lang.Integer" column="id_product" >
            <generator class="identity" />
        </id>
        <property name="Name">
            <column name="name" />
        </property>
        <property name="Type">
            <column name="type" />
        </property>

        <many-to-one name="shelf" class="com.umler.warehouses.Model.Shelf" column="shelf_id" />
        <many-to-one name="company" class="com.umler.warehouses.Model.Company" column="company_id" />
    </class>

    <class name="com.umler.warehouses.Model.Contract" table="contract">
        <id name="id_contract" type="java.lang.Integer" column="id_contract" >
            <generator class="identity" />
        </id>

        <property name="StartDate" >
            <column name="StartDate" />
        </property>

        <property name="EndDate" >
            <column name="EndDate" />
        </property>

        <one-to-one name="company" class="com.umler.warehouses.Model.Company" cascade="all-delete-orphan"/>
        <many-to-one name="warehouse" class="com.umler.warehouses.Model.Warehouse" column="warehouse_id" />
    </class>

    <class name="com.umler.warehouses.Model.Company" table="company">
        <id name="id_company" type="java.lang.Integer" column="id_company" >
            <generator class="identity" />
        </id>
        <property name="Name">
            <column name="name" />
        </property>
        <property name="Address">
            <column name="address"/>
        </property>
        <property name="PhoneNumber">
            <column name="phone"/>
        </property>
        <property name="MSRN">
            <column name="msrn"/>
        </property>
        <property name="TIN">
            <column name="tin"/>
        </property>

        <set name="productList" inverse="true" cascade="all-delete-orphan">
            <key column="company_id" />
            <one-to-many class="com.umler.warehouses.Model.Product" />
        </set>

        <one-to-one name="contract" class="com.umler.warehouses.Model.Contract"/>
    </class>

</hibernate-mapping>